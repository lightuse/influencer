# コーディング規約

このドキュメントは、プロジェクトにおけるコーディング規約を定めます。
コードの可読性、保守性、一貫性を高めることを目的としています。

## 1. 全般

- コードは常に明確で理解しやすいものにしてください。
- 冗長なコードやコメントは避けてください。
- DRY (Don't Repeat Yourself) 原則に従ってください。
- 単一責任の原則 (SRP) を守ってください。

## 2. 命名規則

- 変数名、関数名、クラス名などは、その目的を明確に表すように命名してください。
- キャメルケース (camelCase) を使用してください。
  - 例: `userName`, `calculateTotalPrice`
- クラス名、インターフェース名にはパスカルケース (PascalCase) を使用してください。
  - 例: `UserService`, `IUserRepository`
- 定数にはすべて大文字とアンダースコアを使用してください。
  - 例: `MAX_LENGTH`, `DEFAULT_TIMEOUT`

## 3. フォーマット

- インデントはスペース2つを使用してください。タブは使用しないでください。
- 行の長さは120文字以内に収めるようにしてください。
- ブロックの開始 `{` は、そのブロックを定義する行と同じ行に配置してください。
- `if`, `for`, `while` などの制御構造の後には必ずスペースを入れてください。
  - 例: `if (condition)`
- 演算子の前後にはスペースを入れてください。
  - 例: `a + b`, `c === d`

## 4. コメント

- コメントは、コードの「なぜ (Why)」を説明するために使用してください。「何を (What)」や「どのように (How)」はコード自体が語るべきです。
- 複雑なロジックや、特定のビジネスルールに関する説明が必要な場合にコメントを追加してください。
- TODOコメントは、将来の作業や改善点を示すために使用し、完了したら削除してください。
- ドキュメンテーションコメント (TSDocなど) を積極的に使用し、関数やクラスの目的、引数、戻り値などを明確にしてください。

## 5. エラーハンドリング

- エラーは適切に捕捉し、ユーザーまたはシステムに意味のある情報を提供してください。
- エラーメッセージは具体的で、問題解決に役立つ情報を含めるようにしてください。

## 6. テスト

- すべての機能には、適切な単体テストおよび結合テストを記述してください。
- テストコードは、本番コードと同様に保守され、可読性が高いものにしてください。
- テストは自動化され、CI/CDパイプラインに組み込まれるべきです。

## 7. その他

- コードレビューを積極的に行い、品質向上に努めてください。
- 依存関係は最小限に抑え、必要なものだけを使用してください。
- セキュリティを常に意識したコーディングを心がけてください。

## 8. TypeScript コーディング規約

- **型定義**:
  - 変数、関数引数、戻り値には明示的な型定義を推奨します。
  - `any` 型の使用は最小限に抑え、具体的な型を使用するように努めてください。
  - 型推論が適切に機能する場合は、冗長な型定義は避けても構いません。
- **インターフェースと型エイリアス**:
  - オブジェクトの形状を定義する場合は、`interface` を優先的に使用してください。
  - プリミティブ型、ユニオン型、タプル型などの複雑な型を定義する場合は `type` エイリアスを使用してください。
- **Enum**:
  - 関連する定数の集合を定義する場合は `const enum` を使用し、コンパイル時のインライン化を促進してください。
- **非同期処理**:
  - 非同期処理には `async/await` 構文を積極的に使用し、Promise チェーンの可読性を高めてください。
  - `try...catch` ブロックを使用して、非同期処理中のエラーを適切にハンドリングしてください。
- **モジュール**:
  - ES Modules (`import`/`export`) 構文を使用してモジュールを管理してください。
  - デフォルトエクスポートと名前付きエクスポートを適切に使い分けてください。

## 9. Express コーディング規約

- **ルーティング**:
  - ルート定義は、機能やリソースごとにモジュール化し、`express.Router` を使用して整理してください。
  - ルートパスはセマンティックで、リソースを明確に表すように命名してください。
- **ミドルウェア**:
  - ミドルウェアは単一の責任を持つように設計し、認証、ロギング、バリデーションなどの特定の機能に特化させてください。
  - ミドルウェアの順序は重要です。適切な順序で適用されるように注意してください。
- **エラーハンドリング**:
  - アプリケーションの最後でエラーハンドリングミドルウェアを定義し、すべてのアクションからのエラーを捕捉するようにしてください。
  - エラーレスポンスは、機密情報を含まず、クライアントにとって意味のある情報を提供するようにしてください。
- **設定**:
  - アプリケーションの設定（ポート番号、データベース接続文字列など）は、環境変数 (`process.env`) を使用して管理し、コードに直接ハードコーディングしないでください。
  - 機密情報（APIキー、パスワードなど）は、バージョン管理システムに含めず、安全な方法で管理してください。
- **バリデーション**:
  - クライアントからのリクエストボディ、クエリパラメータ、パスパラメータなどの入力値は、必ずサーバーサイドでバリデーションを行ってください。
  - `Joi` や `express-validator` などのライブラリを使用して、バリデーションロジックを明確に記述してください。
